{
    "info": {
        "name": "Foody API - Complete Automated Collection",
        "description": "# Complete Automated Test Suite for Foody API\n\n## Overview\nComprehensive automated testing collection that validates all core business functions across Admin, Manager, and Member roles. Tests role-based access control, data isolation, business logic compliance, and complete user management operations.\n\n## Test Coverage Matrix\n\n| Function | Admin | Manager (Spice Garden) | Member (Spice Garden) |\n|----------|-------|------------------------|-----------------------|\n| View restaurants & menu items | ‚úÖ Global | ‚úÖ Assigned restaurant | ‚úÖ Assigned restaurant |\n| Create order (add food items) | ‚úÖ | ‚úÖ Restaurant orders | ‚úÖ Restaurant orders (no payment) |\n| Place order (checkout & pay) | ‚úÖ | ‚úÖ Restaurant orders | ‚ùå BLOCKED |\n| Cancel order | ‚úÖ | ‚úÖ Restaurant orders | ‚ùå BLOCKED |\n| Update payment method | ‚úÖ | ‚ùå BLOCKED | ‚ùå BLOCKED |\n| User management (CRUD) | ‚úÖ Admin only | ‚ùå BLOCKED | ‚ùå BLOCKED |\n\n### Additional Security Tests\n- ‚úÖ **Restaurant Restrictions**: Restaurant-based access control\n- ‚úÖ **Permission Boundaries**: Role-based operation blocking\n- ‚úÖ **Error Message Validation**: Proper error responses for blocked operations\n- ‚úÖ **Data Isolation**: Users can only access authorized data\n- ‚úÖ **Business Logic**: Order flow and payment processing tested\n- ‚úÖ **User Management**: Admin-only CRUD operations on user accounts\n\n## Test Flow Architecture\n\n### Admin Flow (Setup & Full Access)\n**Role**: `ADMIN` - Complete system access\n**User**: Nick Fury (admin@foody.com)\n**Capabilities**: All functions enabled\n**Purpose**: Establishes test data and validates admin privileges\n\n### Manager Flow (Restaurant-Scoped Operations)\n**Role**: `MANAGER` - Assigned restaurant management\n**User**: Captain Marvel (captain.marvel@foody.com)\n**Capabilities**: Functions 1-4 within assigned restaurant scope\n**Purpose**: Validates restaurant access control and manager permissions\n\n### Member Flow (Order Creation with Payment Restrictions)\n**Role**: `MEMBER` - Read access with draft order capability\n**User**: Thanos (thanos@foody.com)\n**Capabilities**: Functions 1-2 (view & create orders without payment) within restaurant\n**Purpose**: Validates member restrictions, read access, and pending order creation rule\n\n## Key Testing Features\n- ‚úÖ **Sequential Execution**: Tests run in dependency order\n- ‚úÖ **State Management**: Variables persist across requests\n- ‚úÖ **Role Validation**: Each role tested against all functions\n- ‚úÖ **Error Testing**: Blocked operations validated with proper errors\n- ‚úÖ **Data Isolation**: Restaurant-based access control verified\n- ‚úÖ **Business Logic**: Order flow and payment processing tested\n\n## Execution Requirements\n- **Database**: Must be seeded with test users\n- **Environment**: Local development server running\n- **Order**: Run collection in Postman Collection Runner\n- **Variables**: Auto-managed, no manual setup required\n\n## Test Data Created\n- Restaurants: Test Restaurant - Automated\n- Menu Items: Test Dish - Automated\n- Payment Methods: Automated test tokens\n- Orders: Complete order lifecycle examples\n\n## Validation Points\n- **Authentication**: JWT token management\n- **Authorization**: Role-based access control\n- **Data Filtering**: Restaurant-based restrictions\n- **Business Rules**: Order and payment workflows\n- **Error Handling**: Proper error responses for blocked operations\n- **User Management**: Admin-only user account operations\n\n**Version:** 2.3.0\n**Total Requests:** 44\n**Last Updated:** November 17, 2025\n**Test Duration:** ~50 seconds",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "auth": {
        "type": "bearer",
        "bearer": [
            {
                "key": "token",
                "value": "{{auth_token}}",
                "type": "string"
            }
        ]
    },
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:4000",
            "type": "string"
        },
        {
            "key": "graphql",
            "value": "{{baseUrl}}/graphql",
            "type": "string"
        },
        {
            "key": "auth_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "admin_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "restaurant_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "manager_restaurant_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "menu_item_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "payment_method_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "order_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "payment_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "user_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "management_test_email",
            "value": "",
            "type": "string"
        },
        {
            "key": "manager_menu_item_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "manager_payment_method_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "manager_order_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "member_order_id",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "ADMIN FLOW (Nick Fury)",
            "description": "## Admin Test Suite - Complete System Access\n\n**Role**: `ADMIN` - Full system administrator with global access\n**User**: Nick Fury (admin@foody.com)\n**Capabilities**: All 6 business functions enabled\n\n### Test Sequence\n1. **Authentication**: Login and token management\n2. **Data Setup**: Create restaurants, menu items, payment methods\n3. **Order Processing**: Create, verify, and process orders\n4. **Payment Handling**: Process payments and update methods\n5. **Order Management**: Update status and cancel orders\n6. **User Management**: CRUD operations on user accounts\n\n### Functions Tested\n- ‚úÖ Function 1: View restaurants & menu items (global)\n- ‚úÖ Function 2: Create order with items\n- ‚úÖ Function 3: Place order (checkout & pay)\n- ‚úÖ Function 4: Cancel order\n- ‚úÖ Function 5: Update payment method\n- ‚úÖ Function 6: User management (CRUD operations)\n\n### Key Validations\n- Global data access (all countries)\n- Full CRUD operations on all entities\n- Order lifecycle management\n- Payment processing workflow\n- Administrative controls\n- User account management (create, read, update, delete)\n\n### Test Data Created\n- Restaurant: \"Test Restaurant - Automated\"\n- Menu Item: \"Test Dish - Automated\" ($15.99)\n- Payment Method: Stripe test token\n- Order: Complete order with 2 items\n- Payment: Processed transaction\n- User Management: Complete CRUD operations on user accounts",
            "item": [
                {
                    "name": "01: Login as Admin",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Admin login successful\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.login).to.have.property('token');",
                                    "    pm.expect(response.data.login.user.role).to.equal('ADMIN');",
                                    "    ",
                                    "    const token = response.data.login.token;",
                                    "    pm.collectionVariables.set('auth_token', token);",
                                    "    pm.collectionVariables.set('admin_token', token);",
                                    "    console.log('‚úÖ Admin authenticated - Function 1 access granted');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "noauth"
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation Login($input: LoginInput!) {\n  login(input: $input) {\n    token\n    user {\n      id\n      email\n      role\n    }\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"email\": \"admin@foody.com\",\n    \"password\": \"ChangeMe123!\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Admin Authentication**\n\nAuthenticates as system administrator with full access to all functions.\n\n**Validates**:\n- Successful login with admin credentials\n- JWT token generation\n- Role verification (ADMIN)\n- Token storage for subsequent requests\n\n**Function**: Authentication setup for admin operations"
                    }
                },
                {
                    "name": "02: View Restaurants (Global Access)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Restaurants retrieved\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.restaurants.restaurants).to.be.an('array');",
                                    "    pm.expect(response.data.restaurants.length).to.be.greaterThan(0);",
                                    "    ",
                                    "    // Save first restaurant ID",
                                    "    pm.collectionVariables.set('restaurant_id', response.data.restaurants.restaurants[0].id);",
                                    "    console.log('‚úÖ Function 1: Admin can view restaurants (global access)');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query Restaurants {\n  restaurants {\n    restaurants {\n      id\n      name\n      location\n      city\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 1: View Restaurants (Global Access)**\n\nTests admin ability to view all restaurants across all locations.\n\n**Validates**:\n- Successful data retrieval\n- Global access (no location filtering)\n- Restaurant data structure\n- Variable storage for subsequent tests\n\n**Expected**: All restaurants visible regardless of location"
                    }
                },
                {
                    "name": "03: View Menu Items (Global Access)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Menu items retrieved\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.menuItems.menuItems).to.be.an('array');",
                                    "    ",
                                    "    if (response.data.menuItems.length > 0) {",
                                    "        pm.collectionVariables.set('menu_item_id', response.data.menuItems.menuItems[0].id);",
                                    "    }",
                                    "    console.log('‚úÖ Function 1: Admin can view menu items (global access)');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query MenuItems {\n  menuItems {\n    menuItems {\n      id\n      name\n      price\n      restaurant {\n        id\n        location\n      }\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 1: View Menu Items (Global Access)**\n\nTests admin ability to view all menu items across all restaurants.\n\n**Validates**:\n- Menu item data retrieval\n- Restaurant relationship data\n- Global access to all items\n- Variable storage for order creation\n\n**Expected**: All menu items visible regardless of restaurant location"
                    }
                },
                {
                    "name": "04: Create Restaurant",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Restaurant created\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.createRestaurant).to.have.property('id');",
                                    "    pm.collectionVariables.set('restaurant_id', response.data.createRestaurant.id);",
                                    "    console.log('‚úÖ Restaurant created:', response.data.createRestaurant.id);",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateRestaurant($input: CreateRestaurantInput!) {\n  createRestaurant(input: $input) {\n    id\n    name\n    location\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"name\": \"Test Restaurant - Automated\",\n    \"address\": \"123 Test Street\",\n    \"city\": \"Bangalore\",\n    \"location\": \"automation-hub-{{$randomInt}}\",\n    \"phone\": \"+91-1234567890\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Setup: Create Test Restaurant**\n\nCreates a test restaurant for subsequent menu item and order testing.\n\n**Validates**:\n- Admin can create restaurants\n- Restaurant data structure\n- ID generation and storage\n\n**Test Data**: Restaurant-scoped test data for manager testing"
                    }
                },
                {
                    "name": "05: Create Menu Item",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Menu item created\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.createMenuItem).to.have.property('id');",
                                    "    pm.collectionVariables.set('menu_item_id', response.data.createMenuItem.id);",
                                    "    console.log('‚úÖ Menu item created:', response.data.createMenuItem.id);",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateMenuItem($input: CreateMenuItemInput!) {\n  createMenuItem(input: $input) {\n    id\n    name\n    price\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"name\": \"Test Dish - Automated\",\n    \"description\": \"Automated test menu item\",\n    \"price\": 15.99,\n    \"category\": \"Main Course\",\n    \"restaurantId\": \"{{restaurant_id}}\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Setup: Create Test Menu Item**\n\nCreates a test menu item for order testing.\n\n**Validates**:\n- Admin can create menu items\n- Restaurant relationship\n- Price and category handling\n\n**Test Data**: $15.99 main course for order calculations"
                    }
                },
                {
                    "name": "06: Create Payment Method",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Payment method created\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.createPaymentMethod).to.have.property('id');",
                                    "    pm.collectionVariables.set('payment_method_id', response.data.createPaymentMethod.id);",
                                    "    console.log('‚úÖ Function 5: Admin created payment method');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreatePaymentMethod($input: CreatePaymentMethodInput!) {\n  createPaymentMethod(input: $input, restaurantId: \"{{restaurant_id}}\") {\n    id\n    type\n    provider\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"type\": \"CREDIT_CARD\",\n    \"provider\": \"STRIPE\",\n    \"token\": \"tok_automated_test\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Create Payment Method**\n\nTests admin ability to create payment methods.\n\n**Validates**:\n- Payment method creation\n- Token processing\n- Provider integration\n- Admin-only access to payment management\n\n**Note**: Uses test token for automated testing"
                    }
                },
                {
                    "name": "07: Create & Place Order",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Order created and placed\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.createOrder).to.have.property('id');",
                                    "    pm.expect(response.data.createOrder.status).to.equal('PENDING');",
                                    "    pm.collectionVariables.set('order_id', response.data.createOrder.id);",
                                    "    console.log('‚úÖ Function 2: Admin added items to order');",
                                    "    console.log('‚úÖ Function 3: Admin placed order with payment');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateOrder($input: CreateOrderInput!) {\n  createOrder(input: $input) {\n    id\n    totalAmount\n    status\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"items\": [\n      {\n        \"menuItemId\": \"{{menu_item_id}}\",\n        \"quantity\": 2,\n        \"notes\": \"Extra spicy\"\n      }\n    ],\n    \"phone\": \"+1-555-0100\",\n    \"specialInstructions\": \"Please handle with care\",\n    \"paymentMethodId\": \"{{payment_method_id}}\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Functions 2 & 3: Create Order & Place Order**\n\nTests admin ability to create orders and complete checkout/payment.\n\n**Validates**:\n- Function 2: Order creation with items\n- Function 3: Payment processing integration\n- Order status (PENDING)\n- Total calculation (2 √ó $15.99 = $31.98)\n- Payment method validation\n\n**Order Flow**: Items added ‚Üí Payment processed ‚Üí Order placed"
                    }
                },
                {
                    "name": "08: Verify Order in List",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Order appears in list\", function () {",
                                    "    const response = pm.response.json();",
                                    "    const orderId = pm.collectionVariables.get('order_id');",
                                    "    const orderExists = response.data.orders.some(o => o.id === orderId);",
                                    "    pm.expect(orderExists).to.be.true;",
                                    "    console.log('‚úÖ Order verified in list');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query Orders {\n  orders {\n    orders {\n      id\n      status\n      totalAmount\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Order Verification**\n\nVerifies that created order appears in the orders list.\n\n**Validates**:\n- Order persistence\n- List query functionality\n- Order data integrity\n- Admin can view all orders\n\n**Purpose**: Confirms order was properly saved to database"
                    }
                },
                {
                    "name": "09: Process Payment",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Payment processed\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.processPayment).to.have.property('id');",
                                    "    pm.expect(response.data.processPayment.status).to.equal('COMPLETED');",
                                    "    pm.collectionVariables.set('payment_id', response.data.processPayment.id);",
                                    "    console.log('‚úÖ Payment processed successfully');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation ProcessPayment($input: ProcessPaymentInput!) {\n  processPayment(input: $input) {\n    id\n    amount\n    status\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"orderId\": \"{{order_id}}\",\n    \"paymentMethodId\": \"{{payment_method_id}}\",\n    \"amount\": 31.98\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Payment Processing**\n\nProcesses payment for the created order.\n\n**Validates**:\n- Payment gateway integration\n- Amount validation ($31.98)\n- Order-payment relationship\n- Transaction status (COMPLETED)\n- Payment record creation\n\n**Note**: Uses test payment processing in development"
                    }
                },
                {
                    "name": "10: Update Order Status",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Order status updated\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.updateOrderStatus.status).to.equal('CONFIRMED');",
                                    "    console.log('‚úÖ Order status updated to CONFIRMED');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateOrderStatus($id: ID!, $status: OrderStatus!) {\n  updateOrderStatus(id: $id, status: $status) {\n    id\n    status\n  }\n}",
                                "variables": "{\n  \"id\": \"{{order_id}}\",\n  \"status\": \"CONFIRMED\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 4: Update Order Status**\n\nTests admin ability to update order status.\n\n**Validates**:\n- Status transition (PENDING ‚Üí CONFIRMED)\n- Admin authority for status changes\n- Order state management\n- Status update permissions\n\n**Order Flow**: PENDING ‚Üí CONFIRMED ‚Üí PREPARING ‚Üí etc."
                    }
                },
                {
                    "name": "11: Cancel Order",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Order cancelled\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.updateOrderStatus.status).to.equal('CANCELLED');",
                                    "    console.log('‚úÖ Function 4: Admin cancelled order');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateOrderStatus($id: ID!, $status: OrderStatus!) {\n  updateOrderStatus(id: $id, status: $status) {\n    id\n    status\n  }\n}",
                                "variables": "{\n  \"id\": \"{{order_id}}\",\n  \"status\": \"CANCELLED\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 4: Cancel Order**\n\nTests admin ability to cancel orders.\n\n**Validates**:\n- Order cancellation capability\n- Status change to CANCELLED\n- Admin override permissions\n- Order lifecycle termination\n\n**Note**: Cancelled orders may trigger refund processes"
                    }
                },
                {
                    "name": "12: Update Payment Method",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Ensure we're using admin token",
                                    "const adminToken = pm.collectionVariables.get('admin_token');",
                                    "if (adminToken) {",
                                    "    pm.collectionVariables.set('auth_token', adminToken);",
                                    "    console.log('üîê Switched to admin token for payment method update');",
                                    "}"
                                ]
                            }
                        },
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Payment method updated\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.updatePaymentMethod).to.have.property('id');",
                                    "    pm.expect(response.data.updatePaymentMethod.isDefault).to.be.true;",
                                    "    console.log('‚úÖ Function 5: Admin updated payment method');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdatePaymentMethod($id: ID!, $input: UpdatePaymentMethodInput!) {\n  updatePaymentMethod(id: $id, input: $input) {\n    id\n    isDefault\n  }\n}",
                                "variables": "{\n  \"id\": \"{{payment_method_id}}\",\n  \"input\": {\n    \"isDefault\": true\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Update Payment Method**\n\nTests admin ability to update payment method settings.\n\n**Validates**:\n- Payment method modification\n- Default status management\n- Admin-only access to updates\n- Settings persistence\n\n**Note**: Setting as default unsets other default methods"
                    }
                },
                {
                    "name": "12.5: Register Test User for Management",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "const adminToken = pm.collectionVariables.get('admin_token');",
                                    "if (!adminToken) {",
                                    "    throw new Error('Admin token required to register management test user.');",
                                    "}",
                                    "pm.collectionVariables.set('auth_token', adminToken);",
                                    "const generatedEmail = `test.user.management+${Date.now()}@foody.com`;",
                                    "pm.collectionVariables.set('management_test_email', generatedEmail);",
                                    "pm.collectionVariables.set('user_id', '');",
                                    "console.log('üîê Using admin token for test user registration');",
                                    "console.log('üìß Generated management test email:', generatedEmail);"
                                ]
                            }
                        },
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Test user registered successfully\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data).to.have.property('register');",
                                    "    pm.expect(response.data.register).to.have.property('user');",
                                    "    pm.expect(response.data.register.user).to.have.property('id');",
                                    "    ",
                                    "    // Store test user ID for user management tests",
                                    "    pm.collectionVariables.set('user_id', response.data.register.user.id);",
                                    "    console.log('‚úÖ Test user registered for management tests:', response.data.register.user.id);",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation RegisterTestUser($input: RegisterInput!) {\n  register(input: $input) {\n    token\n    user {\n      id\n      email\n      role\n      restaurantId\n    }\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"email\": \"{{management_test_email}}\",\n    \"password\": \"TestPass123!\",\n    \"firstName\": \"Test\",\n    \"lastName\": \"User\",\n    \"role\": \"MEMBER\",\n    \"restaurantId\": \"restaurant-india-1\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Setup: Register Test User for Management Tests**\n\nCreates a dedicated test user for user management operations.\n\n**Validates**:\n- Admin-only registration control\n- Test user created with predictable data\n- User ID stored for subsequent tests\n\n**Test User Details**:\n- Email: {{management_test_email}}\n- Role: MEMBER (restaurant-scoped)\n- Safe to delete after tests"
                    }
                },
                {
                    "name": "13: Get All Users",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Get all users successful\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data.users).to.have.property('users');",
                                    "    const users = response.data.users || [];",
                                    "    const targetEmail = pm.collectionVariables.get('management_test_email') || 'test.user.management@foody.com';",
                                    "    const managementUser = users.find(user => user.email === targetEmail);",
                                    "    pm.expect(managementUser, `Management test user (${targetEmail}) should exist`).to.exist;",
                                    "    if (managementUser) {",
                                    "        pm.collectionVariables.set('user_id', managementUser.id);",
                                    "        console.log('üë§ Stored user_id for admin management tests:', managementUser.id);",
                                    "    } else {",
                                    "        console.log(`‚ö†Ô∏è Management test user not found in list for email: ${targetEmail}. Using previously stored user_id.`);",
                                    "    }",
                                    "    console.log('‚úÖ Admin retrieved all users - User management access granted');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query GetAllUsers {\n  users(first: 10, skip: 0) {\n    users {\n      id\n      email\n      firstName\n      lastName\n      role\n      restaurantId\n      isActive\n      orders {\n        id\n        status\n        totalAmount\n      }\n      paymentMethods {\n        id\n        type\n        provider\n        isDefault\n      }\n    }\n  }\n}",
                                "variables": "{}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**User Management - Get All Users**\n\nTests admin ability to retrieve paginated list of all users in the system.\n\n**Validates**:\n- Admin-only access to user management\n- Paginated user retrieval\n- User data structure (profile, orders, payment methods)\n- Role and location assignment visibility\n- Active status tracking\n\n**Admin Permissions**:\n- View all user profiles globally\n- Access user order history\n- View payment method details\n- Monitor user account status\n\n**Data Included**:\n- User profile information\n- Recent orders with status and amounts\n- Payment methods with provider details\n- Account activation status"
                    }
                },
                {
                    "name": "14: Get User Details",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Get user details successful\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data).to.have.property('user');",
                                    "    console.log('‚úÖ Admin retrieved user details - Individual user access granted');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query GetUserDetails($id: ID!) {\n  user(id: $id) {\n    id\n    email\n    firstName\n    lastName\n    role\n    restaurantId\n    isActive\n    orders {\n      id\n      status\n      totalAmount\n      createdAt\n    }\n    paymentMethods {\n      id\n      type\n      isDefault\n      createdAt\n    }\n  }\n}",
                                "variables": "{\n  \"id\": \"{{user_id}}\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**User Management - Get User Details**\n\nTests admin ability to retrieve detailed information for a specific user.\n\n**Validates**:\n- Admin access to individual user profiles\n- User ID validation and lookup\n- Complete user data retrieval\n- Order history access\n- Payment method visibility\n\n**Admin Capabilities**:\n- View any user's complete profile\n- Access detailed order history\n- Review payment method configurations\n- Monitor user account details\n\n**Data Retrieved**:\n- Full user profile information\n- Complete order history (limited to recent)\n- All payment methods with details\n- Account status and metadata"
                    }
                },
                {
                    "name": "15: Update User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Update user successful\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data).to.have.property('updateUser');",
                                    "    console.log('‚úÖ Admin updated user - User management permissions granted');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateUser($id: ID!, $input: UpdateUserInput!) {\n  updateUser(id: $id, input: $input) {\n    id\n    email\n    firstName\n    lastName\n    role\n    restaurantId\n    isActive\n  }\n}",
                                "variables": "{\n  \"id\": \"{{user_id}}\",\n  \"input\": {\n    \"role\": \"MANAGER\",\n    \"restaurantId\": \"restaurant-india-1\",\n    \"isActive\": true\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**User Management - Update User**\n\nTests admin ability to modify user account properties and permissions.\n\n**Validates**:\n- Admin-only user modification access\n- Role change capabilities\n- Location reassignment\n- Account activation/deactivation\n- Partial update functionality\n\n**Admin Controls**:\n- Change user roles (MEMBER ‚Üí MANAGER ‚Üí ADMIN)\n- Reassign user locations\n- Activate/deactivate accounts\n- Update user permissions\n\n**Update Fields**:\n- **role**: Change access level\n- **restaurantId**: Location reassignment\n- **isActive**: Account status control\n\n**Business Impact**:\n- Role changes affect system access\n- Location changes affect data visibility\n- Deactivation prevents login"
                    }
                },
                {
                    "name": "16: Delete User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Delete user successful\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data).to.have.property('deleteUser');",
                                    "    console.log('‚úÖ Admin deleted user - Complete user management access');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation DeleteUser($id: ID!) {\n  deleteUser(id: $id)\n}",
                                "variables": "{\n  \"id\": \"{{user_id}}\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**User Management - Delete User**\n\nTests admin ability to permanently remove user accounts from the system.\n\n**Validates**:\n- Admin-only user deletion access\n- User existence verification\n- Cascade deletion of related data\n- Permanent removal confirmation\n\n**Admin Authority**:\n- Complete account removal\n- Data cleanup across all entities\n- Audit trail maintenance\n\n**Cascade Effects**:\n- User profile deletion\n- Associated orders removal\n- Payment methods cleanup\n- Payment records deletion\n\n**Critical Operation**:\n- **Permanent and irreversible**\n- Requires careful admin oversight\n- Complete data removal from system\n\n**Production Note**: Consider soft deletion for compliance"
                    }
                }
            ]
        },
        {
            "name": "MANAGER FLOW (Captain Marvel)",
            "description": "## Manager Test Suite - Restaurant-Scoped Operations\n\n**Role**: `MANAGER` - Restaurant-specific restaurant and order management\n**User**: Captain Marvel (captain.marvel@foody.com)\n**Capabilities**: Functions 1-4 within assigned restaurant scope, blocked from Function 5\n\n### Test Sequence\n1. **Authentication**: Login and token management\n2. **Data Access**: View assigned-restaurant restaurants and menu items only\n3. **Order Management**: Create orders, update status, cancel orders\n4. **Payment Restrictions**: Blocked from payment method management\n5. **Menu Management**: Create menu items for assigned restaurant\n\n### Functions Tested\n- ‚úÖ Function 1: View restaurants & menu items (assigned restaurant only)\n- ‚úÖ Function 2: Create order with items (assigned-restaurant restaurants)\n- ‚úÖ Function 3: Place order (checkout & pay) (assigned scope)\n- ‚úÖ Function 4: Cancel order (assigned orders)\n- ‚ùå Function 5: Update payment method (blocked)\n\n### Key Validations\n- Restaurant access control (assigned restaurant only)\n- Order creation and management within scope\n- Payment method restrictions\n- Menu item management for assigned restaurant\n- Status update permissions\n\n### Restaurant Restrictions\n- **Restaurants**: Only assigned-restaurant restaurants visible\n- **Orders**: Only orders from assigned members\n- **Menu Items**: Create/update only for assigned restaurant\n- **Payments**: Cannot manage payment methods",
            "item": [
                {
                    "name": "01: Login as Manager (Spice Garden)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager login successful\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.login.user.role).to.equal('MANAGER');",
                                    "    pm.expect(response.data.login.user.restaurantId).to.equal('restaurant-india-1');",
                                    "    ",
                                    "    const token = response.data.login.token;",
                                    "    pm.collectionVariables.set('auth_token', token);",
                                    "    console.log('‚úÖ Manager authenticated for restaurant-india-1');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "noauth"
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation Login($input: LoginInput!) {\n  login(input: $input) {\n    token\n    user {\n      id\n      email\n      role\n      restaurantId\n    }\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"email\": \"captain.marvel@foody.com\",\n    \"password\": \"ChangeMe123!\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Manager Authentication**\n\nAuthenticates as restaurant-scoped manager with restricted access.\n\n**Validates**:\n- Successful login with manager credentials\n- Role verification (MANAGER)\n- Restaurant assignment (restaurant-india-1)\n- Token storage for subsequent operations\n\n**Access Scope**: All operations limited to assigned restaurant"
                    }
                },
                {
                    "name": "02: View Assigned Restaurant Restaurants Only",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Only assigned-restaurant restaurants visible\", function () {",
                                    "    const response = pm.response.json();",
                                    "    const restaurants = response.data.restaurants.restaurants || [];",
                                    "    pm.expect(restaurants).to.be.an('array');",
                                    "    pm.expect(restaurants.length).to.be.greaterThan(0);",
                                    "    restaurants.forEach(r => {",
                                    "        pm.expect(r.id).to.equal('restaurant-india-1');",
                                    "    });",
                                    "    const scopedRestaurant = restaurants[0];",
                                    "    if (scopedRestaurant) {",
                                    "        pm.collectionVariables.set('manager_restaurant_id', scopedRestaurant.id);",
                                    "        console.log('üè™ Stored manager_restaurant_id:', scopedRestaurant.id);",
                                    "    } else {",
                                    "        pm.collectionVariables.unset('manager_restaurant_id');",
                                    "        console.log('‚ö†Ô∏è No assigned-restaurant restaurant available to store');",
                                    "    }",
                                    "    console.log('‚úÖ Function 1: Manager can view assigned restaurant only - Restaurant restriction enforced');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query Restaurants {\n  restaurants {\n    restaurants {\n      id\n      name\n      location\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 1: View Restaurants (Location-Restricted)**\n\nTests manager ability to view only assigned-location restaurants.\n\n**Validates**:\n- Location access control\n- Location filtering (spice-garden-bangalore only)\n- No access to other locations\n- Manager read permissions\n\n**Expected**: Only restaurants with location=spice-garden-bangalore visible"
                    }
                },
                {
                    "name": "03: View Menu Items",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Menu items retrieved\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.menuItems.menuItems).to.be.an('array');",
                                    "    console.log('‚úÖ Function 1: Manager can view menu items');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query MenuItems {\n  menuItems {\n    menuItems {\n      id\n      name\n      price\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 1: View Menu Items**\n\nTests manager ability to view menu items.\n\n**Validates**:\n- Menu item access permissions\n- No geographic restrictions on viewing\n- Read-only access to all items\n\n**Note**: Managers can view all menu items but can only modify assigned-location items"
                    }
                },
                {
                    "name": "04: Create Menu Item (Assigned Restaurant)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Menu item created for assigned-location restaurant\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.createMenuItem).to.have.property('id');",
                                    "    pm.collectionVariables.set('manager_menu_item_id', response.data.createMenuItem.id);",
                                    "    console.log('‚úÖ Manager created menu item for assigned restaurant');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateMenuItem($input: CreateMenuItemInput!) {\n  createMenuItem(input: $input) {\n    id\n    name\n    price\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"name\": \"Manager Test Dish\",\n    \"description\": \"Created by assigned restaurant manager\",\n    \"price\": 12.99,\n    \"category\": \"Appetizer\",\n    \"restaurantId\": \"{{manager_restaurant_id}}\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Manager Menu Management**\n\nTests manager ability to create menu items for assigned restaurant.\n\n**Validates**:\n- Restaurant-based creation permissions\n- Restaurant ownership validation\n- Menu item data structure\n- Restaurant access control\n\n**Scope**: Assigned restaurant only"
                    }
                },
                {
                    "name": "05: Create Payment Method (ALLOWED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager CAN create payment method\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.createPaymentMethod).to.have.property('id');",
                                    "    pm.collectionVariables.set('manager_payment_method_id', response.data.createPaymentMethod.id);",
                                    "    console.log('‚úÖ Function 5: Manager created payment method');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreatePaymentMethod($input: CreatePaymentMethodInput!) {\n  createPaymentMethod(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"type\": \"CREDIT_CARD\",\n    \"provider\": \"STRIPE\",\n    \"token\": \"tok_manager\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Create Payment Method (ALLOWED)**\n\nTests that managers can create payment methods for order processing.\n\n**Validates**:\n- Manager payment method creation permissions\n- Payment method data structure\n- Token processing capability\n- Payment method ownership\n\n**Note**: Managers need payment methods to create orders"
                    }
                },
                {
                    "name": "06: Update Payment Method (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager CANNOT update payment method\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Admin access required to update payment methods');",
                                    "    console.log('‚úÖ Function 5: Manager blocked from updating payment methods');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdatePaymentMethod($id: ID!, $input: UpdatePaymentMethodInput!) {\n  updatePaymentMethod(id: $id, input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"id\": \"dummy-id\",\n  \"input\": {\n    \"isDefault\": true\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Update Payment Method (BLOCKED)**\n\nTests that managers cannot update payment methods.\n\n**Validates**:\n- Payment method modification restrictions\n- Admin-only update permissions\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing modification"
                    }
                },
                {
                    "name": "07: Read Payment Methods (ALLOWED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager CAN read payment methods\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.paymentMethods).to.be.an('array');",
                                    "    console.log('‚úÖ Function 5: Manager can read payment methods');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query PaymentMethods {\n  paymentMethods {\n    id\n    type\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Read Payment Methods (ALLOWED)**\n\nTests that managers can read payment methods (view-only).\n\n**Validates**:\n- Read access to payment methods\n- No modification capabilities\n- Information access for order processing\n\n**Note**: Managers can view but not modify payment methods"
                    }
                },
                {
                    "name": "08: Create Order (Assigned Restaurant)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager can create order\", function () {",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data.createOrder).to.have.property('id');",
                                    "    pm.expect(response.data.createOrder.status).to.equal('PENDING');",
                                    "    pm.collectionVariables.set('manager_order_id', response.data.createOrder.id);",
                                    "    console.log('‚úÖ Function 2: Manager added items to order');",
                                    "    console.log('‚úÖ Function 3: Manager placed order with payment');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateOrder($input: CreateOrderInput!) {\n  createOrder(input: $input) {\n    id\n    totalAmount\n    status\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"items\": [\n      {\n        \"menuItemId\": \"{{manager_menu_item_id}}\",\n        \"quantity\": 1,\n        \"notes\": \"Manager order test\"\n      }\n    ],\n    \"phone\": \"+91-9876543210\",\n    \"specialInstructions\": \"Extra spicy please\",\n    \"paymentMethodId\": \"{{manager_payment_method_id}}\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Functions 2 & 3: Create & Place Order**\n\nTests manager ability to create orders for assigned restaurant.\n\n**Validates**:\n- Function 2: Order creation with assigned restaurant items\n- Function 3: Payment processing for orders\n- Restaurant scope validation\n- Manager ordering permissions\n- Order status (PENDING)\n\n**Scope**: Orders must use assigned restaurant menu items"
                    }
                },
                {
                    "name": "09: View Orders & Extract ID",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Orders retrieved for assigned restaurant\", function () {",
                                    "    const response = pm.response.json();",
                                    "    const orders = response.data.orders.orders;",
                                    "    pm.expect(orders).to.be.an('array');",
                                    "    ",
                                    "    orders.forEach(order => {",
                                    "        pm.expect(order.user.restaurantId).to.equal('restaurant-india-1');",
                                    "    });",
                                    "    ",
                                    "    if (orders.length > 0) {",
                                    "        const scopedOrder = orders.find(order => order.user.restaurantId === 'restaurant-india-1');",
                                    "        if (scopedOrder) {",
                                    "            pm.collectionVariables.set('order_id', scopedOrder.id);",
                                    "            console.log('‚úÖ Order ID saved for status update test');",
                                    "        } else {",
                                    "            pm.collectionVariables.unset('order_id');",
                                    "            console.log('‚ö†Ô∏è No assigned restaurant order available for updates');",
                                    "        }",
                                    "    }",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query Orders {\n  orders {\n    orders {\n      id\n      status\n      totalAmount\n      user {\n        id\n        restaurantId\n      }\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Order Management Access**\n\nTests manager ability to view orders within their assigned restaurant.\n\n**Validates**:\n- Order visibility permissions\n- Restaurant filtering (restaurant-india-1 only)\n- Order data access\n- Variable storage for updates\n\n**Scope**: Assigned restaurant member orders only"
                    }
                },
                {
                    "name": "10: Update Order Status",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "const orderId = pm.collectionVariables.get('order_id');",
                                    "",
                                    "if (orderId) {",
                                    "    pm.test(\"Manager can update order status\", function () {",
                                    "        const response = pm.response.json();",
                                    "        pm.expect(response.data.updateOrderStatus.status).to.equal('CONFIRMED');",
                                    "        console.log('‚úÖ Function 4: Manager updated order status');",
                                    "    });",
                                    "} else {",
                                    "    pm.test(\"Skipped - no order available\", function () {",
                                    "        console.log('‚ö†Ô∏è No order to update');",
                                    "        pm.expect(true).to.be.true;",
                                    "    });",
                                    "}"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateOrderStatus($id: ID!, $status: OrderStatus!) {\n  updateOrderStatus(id: $id, status: $status) {\n    id\n    status\n  }\n}",
                                "variables": "{\n  \"id\": \"{{order_id}}\",\n  \"status\": \"CONFIRMED\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 4: Update Order Status**\n\nTests manager ability to update order status within their assigned restaurant.\n\n**Validates**:\n- Status update permissions\n- Restaurant-based restrictions\n- Order lifecycle management\n- Manager authority for status changes\n\n**Scope**: Assigned restaurant orders only"
                    }
                },
                {
                    "name": "11: Cancel Order",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager can cancel order\", function () {",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data.updateOrderStatus.status).to.equal('CANCELLED');",
                                    "    console.log('‚úÖ Function 4: Manager cancelled order');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateOrderStatus($id: ID!, $status: OrderStatus!) {\n  updateOrderStatus(id: $id, status: $status) {\n    id\n    status\n  }\n}",
                                "variables": "{\n  \"id\": \"{{manager_order_id}}\",\n  \"status\": \"CANCELLED\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 4: Cancel Order**\n\nTests manager ability to cancel orders within their assigned restaurant.\n\n**Validates**:\n- Order cancellation permissions\n- Restaurant-based restrictions\n- Status change to CANCELLED\n- Manager override capabilities\n\n**Scope**: Orders created by assigned restaurant members"
                    }
                },
                {
                    "name": "12: Delete Menu Item (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager CANNOT delete menu items (referenced by orders)\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Not authorized to delete menu items');",
                                    "    console.log('‚úÖ Manager blocked from deleting menu items referenced by orders');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation DeleteMenuItem($id: ID!) {\n  deleteMenuItem(id: $id)\n}",
                                "variables": "{\n  \"id\": \"{{manager_menu_item_id}}\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Menu Item Deletion (BLOCKED)**\n\nTests that managers cannot delete menu items referenced by orders.\n\n**Validates**:\n- Foreign key constraint enforcement\n- Data integrity protection\n- Menu item deletion restrictions\n- Database relationship constraints\n\n**Expected**: Foreign key constraint error preventing deletion"
                    }
                },
                {
                    "name": "13: Create Restaurant (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Manager CANNOT create restaurant\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Admin access required to create restaurants');",
                                    "    console.log('‚úÖ Manager blocked from creating restaurants');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateRestaurant($input: CreateRestaurantInput!) {\n  createRestaurant(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"name\": \"Manager Restaurant\",\n    \"description\": \"Created from manager negative test\",\n    \"location\": \"manager-test-location\",\n    \"city\": \"Delhi\",\n    \"address\": \"Test Address\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Restaurant Creation (BLOCKED)**\n\nTests that managers cannot create restaurants.\n\n**Validates**:\n- Restaurant creation restrictions\n- Admin-only permissions\n- Location uniqueness enforcement\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing restaurant creation"
                    }
                }
            ]
        },
        {
            "name": "MEMBER FLOW (Thanos)",
            "description": "## Member Test Suite - Read-Only Access\n\n**Role**: `MEMBER` - Read-only access with restaurant scoping\n**User**: Thanos (thanos@foody.com)\n**Assigned Restaurant**: restaurant-india-1\n**Capabilities**: Function 1 (view data); Functions 2-5 blocked by RBAC\n\n### Test Sequence\n1. **Authentication**: Login and token management\n2. **Data Access**: View assigned-restaurant restaurants and menu items\n3. **Order Attempt**: Verify order creation is blocked for members\n4. **Blocked Operations**: Attempt restricted actions (checkout, payments, cancellations)\n\n### Functions Tested\n- ‚úÖ Function 1: View restaurants & menu items (assigned restaurant only)\n- ‚ùå Function 2: Create order (blocked for members)\n- ‚ùå Function 3: Attach payment / checkout (blocked)\n- ‚ùå Function 4: Cancel order - BLOCKED\n- ‚ùå Function 5: Update payment method - BLOCKED\n\n### Key Validations\n- Restaurant data filtering (assigned restaurants only)\n- Read-only access enforcement for orders\n- Proper error responses for restricted payment operations\n- Security boundary enforcement\n\n### Test Data Used\n- Restaurants: restaurant-india-1 only\n- Menu Items: All items (read access)\n\n### Member Restrictions\nMembers can browse menu items but cannot:\n- Create orders or attach payment methods\n- Complete payment transactions\n- Cancel orders\n- Modify menu items\n- Create payment methods\n- Access admin/management functions",
            "item": [
                {
                    "name": "01: Login as Member (Spice Garden)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member login successful\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.login.user.role).to.equal('MEMBER');",
                                    "    pm.expect(response.data.login.user.restaurantId).to.equal('restaurant-india-1');",
                                    "    ",
                                    "    const token = response.data.login.token;",
                                    "    pm.collectionVariables.set('auth_token', token);",
                                    "    console.log('‚úÖ Member authenticated for restaurant-india-1 - Read-only access confirmed');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "noauth"
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation Login($input: LoginInput!) {\n  login(input: $input) {\n    token\n    user {\n      id\n      email\n      role\n      restaurantId\n    }\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"email\": \"thanos@foody.com\",\n    \"password\": \"ChangeMe123!\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Member Authentication**\n\nAuthenticates as restaurant-scoped member with read-only access privileges.\n\n**Validates**:\n- Successful login with member credentials\n- Role verification (MEMBER)\n- Restaurant assignment (restaurant-india-1)\n- Token storage for subsequent operations\n\n**Access Scope**: Read-only access to assigned restaurant data"
                    }
                },
                {
                    "name": "02: View Assigned Restaurant Restaurants Only",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Only assigned-restaurant restaurants visible\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.restaurants.restaurants).to.be.an('array');",
                                    "    response.data.restaurants.restaurants.forEach(r => {",
                                    "        pm.expect(r.id).to.equal('restaurant-india-1');",
                                    "    });",
                                    "    console.log('‚úÖ Function 1: Member can view assigned restaurant only - Restaurant restriction enforced');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query Restaurants {\n  restaurants {\n    restaurants {\n      id\n      name\n      location\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 1: View Restaurants (Restaurant-Restricted)**\n\nTests member ability to view only assigned-restaurant restaurants.\n\n**Validates**:\n- Restaurant access control\n- Restaurant filtering (restaurant-india-1 only)\n- No access to other restaurants\n- Member read permissions\n\n**Expected**: Only restaurants with id=restaurant-india-1 visible"
                    }
                },
                {
                    "name": "03: View Menu Items",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member can view menu items\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.data.menuItems.menuItems).to.be.an('array');",
                                    "    console.log('‚úÖ Function 1: Member can view menu items');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "query MenuItems {\n  menuItems {\n    menuItems {\n      id\n      name\n      price\n    }\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 1: View Menu Items**\n\nTests member ability to view menu items.\n\n**Validates**:\n- Menu item access permissions\n- No geographic restrictions on viewing\n- Read-only access to all items\n\n**Note**: Members can view all menu items but cannot modify them"
                    }
                },
                {
                    "name": "04: Create Order (ALLOWED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member can create orders without payment\", function () {",
                                    "    const response = pm.response.json();",
                                    "    ",
                                    "    // Check for GraphQL errors",
                                    "    if (response.errors) {",
                                    "        pm.expect.fail('GraphQL errors found: ' + JSON.stringify(response.errors));",
                                    "    }",
                                    "    ",
                                    "    pm.expect(response.data.createOrder).to.have.property('id');",
                                    "    pm.expect(response.data.createOrder.status).to.equal('PENDING');",
                                    "    pm.collectionVariables.set('member_order_id', response.data.createOrder.id);",
                                    "    console.log('‚úÖ Function 2: Member successfully created order without payment');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateOrder($input: CreateOrderInput!) {\n  createOrder(input: $input) {\n    id\n    totalAmount\n    status\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"items\": [\n      {\n        \"menuItemId\": \"{{manager_menu_item_id}}\",\n        \"quantity\": 1,\n        \"notes\": \"Member order test\"\n      }\n    ],\n    \"phone\": \"+91-9876543210\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 2: Create Order (ALLOWED)**\n\nValidates that members can create orders without payment methods.\n\n**Validates**:\n- Order creation allowed for members\n- Members can add items to cart\n- Order created in PENDING status\n- No payment method required for order creation\n\n**Expected**: Successful order creation without payment"
                    }
                },
                {
                    "name": "05: Place Order with Payment (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member blocked when attempting to attach payment method\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Only managers or admins can attach payment methods');",
                                    "    console.log('‚úÖ Function 3: Member cannot attach payment to order');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateOrder($input: CreateOrderInput!) {\n  createOrder(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"items\": [\n      {\n        \"menuItemId\": \"{{manager_menu_item_id}}\",\n        \"quantity\": 1\n      }\n    ],\n    \"phone\": \"+91-0000000000\",\n    \"paymentMethodId\": \"{{manager_payment_method_id}}\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 3: Place Order with Payment (BLOCKED)**\n\nEnsures members are blocked from attaching payment methods to orders.\n\n**Validates**:\n- Payment method attachment restriction for members\n- Proper error message for unauthorized payment attachment\n- Security boundary maintained between order creation and payment\n\n**Expected**: GraphQL error indicating only managers/admins can attach payment methods"
                    }
                },
                {
                    "name": "07: Cancel Order (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT cancel order\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    console.log('‚úÖ Function 4: Member blocked from cancelling orders');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateOrderStatus($id: ID!, $status: OrderStatus!) {\n  updateOrderStatus(id: $id, status: $status) {\n    id\n  }\n}",
                                "variables": "{\n  \"id\": \"dummy-order-id\",\n  \"status\": \"CANCELLED\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 4: Cancel Order (BLOCKED)**\n\nTests that members cannot cancel orders.\n\n**Validates**:\n- Order cancellation restrictions\n- Status update blocking\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing order cancellation"
                    }
                },
                {
                    "name": "08: Create Payment Method (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT create payment method\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    console.log('‚úÖ Function 5: Member blocked from creating payment methods');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreatePaymentMethod($input: CreatePaymentMethodInput!) {\n  createPaymentMethod(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"type\": \"CREDIT_CARD\",\n    \"provider\": \"STRIPE\",\n    \"token\": \"tok_member\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Create Payment Method (BLOCKED)**\n\nTests that members cannot create payment methods.\n\n**Validates**:\n- Payment method creation restrictions\n- Admin-only access control\n- Proper error messaging\n- Security boundary enforcement\n\n**Expected**: GraphQL error preventing payment method creation"
                    }
                },
                {
                    "name": "09: Update Menu Item (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT update menu items\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Not authorized to update menu items');",
                                    "    console.log('‚úÖ Member blocked from updating menu items');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateMenuItem($id: ID!, $input: UpdateMenuItemInput!) {\n  updateMenuItem(id: $id, input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"id\": \"{{manager_menu_item_id}}\",\n  \"input\": {\n    \"price\": 99.99\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Menu Management (BLOCKED)**\n\nTests that members cannot modify menu items.\n\n**Validates**:\n- Menu item modification restrictions\n- Manager/Admin-only permissions\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing menu item updates"
                    }
                },
                {
                    "name": "10: Cancel Order (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT cancel order\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Members cannot update order status');",
                                    "    console.log('‚úÖ Function 4: Member blocked from cancelling orders');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdateOrderStatus($id: ID!, $status: OrderStatus!) {\n  updateOrderStatus(id: $id, status: $status) {\n    id\n  }\n}",
                                "variables": "{\n  \"id\": \"dummy-order-id\",\n  \"status\": \"CANCELLED\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 4: Cancel Order (BLOCKED)**\n\nTests that members cannot cancel orders.\n\n**Validates**:\n- Order cancellation restrictions\n- Status update blocking for members\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing order cancellation"
                    }
                },
                {
                    "name": "11: Create Payment Method (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT create payment method\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Only admins and managers can manage payment methods');",
                                    "    console.log('‚úÖ Function 5: Member blocked from creating payment methods');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreatePaymentMethod($input: CreatePaymentMethodInput!) {\n  createPaymentMethod(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"type\": \"CREDIT_CARD\",\n    \"provider\": \"STRIPE\",\n    \"token\": \"tok_member\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Create Payment Method (BLOCKED)**\n\nTests that members cannot create payment methods.\n\n**Validates**:\n- Payment method creation restrictions\n- Admin-only access control\n- Proper error messaging\n- Security boundary enforcement\n\n**Expected**: GraphQL error preventing payment method creation"
                    }
                },
                {
                    "name": "12: Update Payment Method (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT update payment method\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Admin access required to update payment methods');",
                                    "    console.log('‚úÖ Function 5: Member blocked from updating payment methods');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation UpdatePaymentMethod($id: ID!, $input: UpdatePaymentMethodInput!) {\n  updatePaymentMethod(id: $id, input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"id\": \"dummy-id\",\n  \"input\": {\n    \"isDefault\": true\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Function 5: Update Payment Method (BLOCKED)**\n\nTests that members cannot update payment methods.\n\n**Validates**:\n- Payment method modification restrictions\n- Admin-only update permissions\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing payment method updates"
                    }
                },
                {
                    "name": "13: Process Payment (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT process payment\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Only admins and managers can process payments');",
                                    "    console.log('‚úÖ Member blocked from processing payments');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation ProcessPayment($input: ProcessPaymentInput!) {\n  processPayment(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"orderId\": \"dummy-order-id\",\n    \"paymentMethodId\": \"{{manager_payment_method_id}}\",\n    \"amount\": 25.99\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Payment Processing (BLOCKED)**\n\nTests that members cannot process payments.\n\n**Validates**:\n- Payment processing restrictions\n- Admin/Manager-only permissions\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing payment processing"
                    }
                },
                {
                    "name": "14: Create Restaurant (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT create restaurant\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Admin access required to create restaurants');",
                                    "    console.log('‚úÖ Member blocked from creating restaurants');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateRestaurant($input: CreateRestaurantInput!) {\n  createRestaurant(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"name\": \"Member Restaurant\",\n    \"description\": \"Created from member negative test\",\n    \"location\": \"member-test-location\",\n    \"city\": \"Mumbai\",\n    \"address\": \"Test Address\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Restaurant Creation (BLOCKED)**\n\nTests that members cannot create restaurants.\n\n**Validates**:\n- Restaurant creation restrictions\n- Admin-only permissions\n- Location uniqueness enforcement\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing restaurant creation"
                    }
                },
                {
                    "name": "15: Create Menu Item (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT create menu items\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Not authorized to create menu items');",
                                    "    console.log('‚úÖ Member blocked from creating menu items');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation CreateMenuItem($input: CreateMenuItemInput!) {\n  createMenuItem(input: $input) {\n    id\n  }\n}",
                                "variables": "{\n  \"input\": {\n    \"name\": \"Member Dish\",\n    \"description\": \"Created by member\",\n    \"price\": 15.99,\n    \"category\": \"Main Course\",\n    \"restaurantId\": \"{{manager_restaurant_id}}\"\n  }\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Menu Item Creation (BLOCKED)**\n\nTests that members cannot create menu items.\n\n**Validates**:\n- Menu item creation restrictions\n- Manager/Admin-only permissions\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing menu item creation"
                    }
                },
                {
                    "name": "16: Delete Menu Item (BLOCKED)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Member CANNOT delete menu items\", function () {",
                                    "    const response = pm.response.json();",
                                    "    pm.expect(response.errors).to.be.an('array');",
                                    "    pm.expect(response.errors[0].message).to.include('Not authorized to delete menu items');",
                                    "    console.log('‚úÖ Member blocked from deleting menu items');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "graphql",
                            "graphql": {
                                "query": "mutation DeleteMenuItem($id: ID!) {\n  deleteMenuItem(id: $id)\n}",
                                "variables": "{\n  \"id\": \"{{manager_menu_item_id}}\"\n}"
                            }
                        },
                        "url": {
                            "raw": "{{graphql}}",
                            "host": ["{{graphql}}"]
                        },
                        "description": "**Menu Item Deletion (BLOCKED)**\n\nTests that members cannot delete menu items.\n\n**Validates**:\n- Menu item deletion restrictions\n- Manager/Admin-only permissions\n- Error handling for unauthorized access\n\n**Expected**: GraphQL error preventing menu item deletion"
                    }
                }
            ]
        }
    ]
}
